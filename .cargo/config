[registries.crates-io]
protocol = "sparse"

# abort on panic because panicking across languages is unsound.
[build]
rustflags = ["-C", "panic=abort"]

# musl targets require -crt-static, panic=abort must be set again because this overrides the 
# rustflags set for the build key.
[target.aarch64-unknown-linux-musl]
rustflags = ["-C", "panic=abort", "-C", "target-feature=-crt-static"]

[target.arm-unknown-linux-musleabihf]
rustflags = ["-C", "panic=abort", "-C", "target-feature=-crt-static"]

[target.armv7-unknown-linux-musleabihf]
rustflags = ["-C", "panic=abort", "-C", "target-feature=-crt-static"]

[target.i686-unknown-linux-musl]
rustflags = ["-C", "panic=abort", "-C", "target-feature=-crt-static"]

[target.x86_64-unknown-linux-musl]
rustflags = ["-C", "panic=abort", "-C", "target-feature=-crt-static"]
